"use strict";(()=>{function dt({timelineWidth:k,minimapBarsData:b,minimapHeight:Z,minimapBarHeight:le,minimapTodayX:me,ganttScroll:ne,minimapSvg:Y,minimapViewport:H,addDocListener:J}){function he(){let x=document.querySelector(".gantt-body .gantt-sticky-left"),E=document.querySelector(".gantt-container");x&&E&&E.style.setProperty("--sticky-left-width",x.offsetWidth+"px")}requestAnimationFrame(he),Y&&requestAnimationFrame(()=>{let x=Z/(b.length+1);if(b.forEach((E,z)=>{let d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("class",E.classes),d.setAttribute("x",(E.startPct*k).toString()),d.setAttribute("y",(x*(z+.5)).toString()),d.setAttribute("width",Math.max(2,(E.endPct-E.startPct)*k).toString()),d.setAttribute("height",le.toString()),d.setAttribute("rx","1"),d.setAttribute("fill",E.color),Y.insertBefore(d,H)}),me>0&&me<k){let E=document.createElementNS("http://www.w3.org/2000/svg","line");E.setAttribute("class","minimap-today"),E.setAttribute("x1",me.toString()),E.setAttribute("y1","0"),E.setAttribute("x2",me.toString()),E.setAttribute("y2",Z.toString()),Y.insertBefore(E,H)}});function ge(){if(!ne||!H)return;let x=Math.max(1,ne.scrollWidth-ne.clientWidth),E=Math.min(1,ne.scrollLeft/x),z=Math.min(1,ne.clientWidth/ne.scrollWidth),d=Math.max(20,z*k),ue=E*(k-d);H.setAttribute("x",ue.toString()),H.setAttribute("width",d.toString())}let N=!1,se=0;function G(x,E=!1){if(!ne||!Y||!H)return;let z=Y.getBoundingClientRect(),ue=parseFloat(H.getAttribute("width")||"0")/k*z.width,$=x.clientX-z.left;E?$-=se:$-=ue/2;let B=Math.max(0,Math.min(1,$/(z.width-ue))),V=Math.max(0,ne.scrollWidth-ne.clientWidth);ne.scrollLeft=B*V}return Y&&H&&(H.addEventListener("mousedown",x=>{x.stopPropagation(),N=!0;let E=Y.getBoundingClientRect(),d=parseFloat(H.getAttribute("x")||"0")/k*E.width;se=x.clientX-E.left-d}),Y.addEventListener("mousedown",x=>{if(x.target===H)return;N=!0;let E=Y.getBoundingClientRect();se=parseFloat(H.getAttribute("width")||"0")/100*E.width/2,G(x,!0)}),J("mousemove",x=>{N&&G(x,!0)}),J("mouseup",()=>{N=!1})),{updateMinimapPosition:he,updateMinimapViewport:ge}}function ut(k){let{vscode:b,menuUndo:Z,menuRedo:le,addDocListener:me,closeOnOutsideClick:ne,announce:Y,saveState:H,updateUndoRedoButtons:J,undoStack:he,redoStack:ge,selectedIssues:N,clearSelection:se,allIssueBars:G,redmineBaseUrl:x,extendedRelationTypes:E,minDateMs:z,maxDateMs:d,timelineWidth:ue,dayWidth:$,barHeight:B,ganttScroll:V,snapToDay:Q,focusOnDependencyChain:ae,clearFocus:l,getFocusedIssueId:g,scrollToAndHighlight:f,setAllowScrollChange:M}=k;function C(n,a,s){document.querySelector(".relation-picker")?.remove();let r=N.size>1&&N.has(s),i=r?Array.from(N).map(I=>parseInt(I)):[parseInt(s)],S=document.createElement("div");S.className="relation-picker";let D=160,w=180,X=Math.min(n,window.innerWidth-D-10),R=Math.min(a,window.innerHeight-w-10);S.style.left=Math.max(10,X)+"px",S.style.top=Math.max(10,R)+"px";let P=document.createElement("div");P.style.padding="6px 12px",P.style.fontSize="11px",P.style.opacity="0.7",P.textContent=r?i.length+" issues selected":"#"+s,S.appendChild(P),(r?[{label:"Set % Done...",command:"bulkSetDoneRatio",bulk:!0},{label:"Clear Selection",command:"clearSelection",local:!0}]:[{label:"Update Issue...",command:"openIssue"},{label:"Open in Browser",command:"openInBrowser"},{label:"Show in Issues",command:"showInIssues"},{label:"Log Time",command:"logTime"},{label:"Set % Done",command:"setDoneRatio"},{label:"Toggle Auto-update %",command:"toggleAutoUpdate"},{label:"Toggle Ad-hoc Budget",command:"toggleAdHoc"},{label:"Toggle Precedence",command:"togglePrecedence"},{label:"Set Internal Estimate",command:"setInternalEstimate"},{label:"Copy Link",command:"copyLink",local:!0},{label:"Copy URL",command:"copyUrl"}]).forEach(I=>{let U=document.createElement("button");U.textContent=I.label,U.addEventListener("click",async()=>{if(I.command==="copyLink"){let Se=document.querySelector('.issue-bar[data-issue-id="'+s+'"]')?.dataset?.subject||"Issue #"+s,We=x+"/issues/"+s,qe='<a href="'+We+'">#'+s+" "+Se+"</a>",Ye=We;try{await navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([Ye],{type:"text/plain"}),"text/html":new Blob([qe],{type:"text/html"})})]),b.postMessage({command:"showStatus",message:"Copied #"+s+" link"})}catch{await navigator.clipboard.writeText(Ye),b.postMessage({command:"showStatus",message:"Copied #"+s+" URL"})}}else I.local?se():I.bulk?b.postMessage({command:I.command,issueIds:i}):b.postMessage({command:I.command,issueId:parseInt(s)});S.remove()}),S.appendChild(U)}),document.body.appendChild(S),ne(S)}function y(n){let a=z+n/ue*(d-z);return new Date(a).toISOString().slice(0,10)}function m(n){let a=z+n/ue*(d-z)-864e5;return new Date(a).toISOString().slice(0,10)}let F=document.getElementById("dragDateTooltip"),_=null;function Ie(n){let a=new Date(n+"T00:00:00"),s=a.toLocaleDateString("en-US",{month:"short"}),r=a.getDate(),i=a.toLocaleDateString("en-US",{weekday:"short"});return s+" "+r+" ("+i+")"}function pe(n,a){let s=new Date(n+"T00:00:00"),r=new Date(a+"T00:00:00"),i=s.toLocaleDateString("en-US",{month:"short"}),S=r.toLocaleDateString("en-US",{month:"short"});return i===S?i+" "+s.getDate()+"-"+r.getDate():i+" "+s.getDate()+"-"+S+" "+r.getDate()}function He(n){F.textContent=n,F.style.display="block",_=n}function je(n){n!==_&&(F.textContent=n,_=n)}function Te(n,a){let s=a-28,r=!1;s<40&&(s=a+20,r=!0),F.style.left=n+"px",F.style.top=s+"px",F.classList.toggle("flipped",r)}function Oe(){F.style.display="none",_=null}let Ae=6;function we(n,a,s,r,i){let S=s>n,w=Math.abs(s-n)<30,X=Math.abs(a-r)<5,R;if(X&&S)R="M "+n+" "+a+" H "+(s-Ae);else if(!X&&w){let I=(a+r)/2;R="M "+n+" "+a+" H "+(n+20)+" V "+I+" H "+(s-20)+" V "+r+" H "+(s-Ae)}else if(S){let L=(n+s)/2;R="M "+n+" "+a+" H "+L+" V "+r+" H "+(s-Ae)}else if(X){let I=a-B;R="M "+n+" "+a+" V "+I+" H "+(s-12)+" V "+r+" H "+(s-Ae)}else{let I=(a+r)/2;R="M "+n+" "+a+" V "+I+" H "+(s-12)+" V "+r+" H "+(s-Ae)}let P="M "+s+" "+r+" l -"+Ae+" -"+Ae*.6+" l 0 "+Ae*1.2+" Z";return{path:R,arrowHead:P}}function Me(n){let a=[],s='.dependency-arrow[data-from="'+n+'"], .dependency-arrow[data-to="'+n+'"]';return document.querySelectorAll(s).forEach(r=>{let i=r.getAttribute("data-from"),S=r.getAttribute("data-to"),w=(r.getAttribute("class")||"").match(/rel-(\w+)/),X=w?w[1]:"relates",R=["blocks","precedes","finish_to_start","start_to_start","finish_to_finish","start_to_finish"].includes(X),P=document.querySelector('.issue-bar[data-issue-id="'+i+'"]'),L=document.querySelector('.issue-bar[data-issue-id="'+S+'"]');!P||!L||a.push({element:r,fromId:i,toId:S,isScheduling:R,fromBar:P,toBar:L,linePath:r.querySelector(".arrow-line"),hitPath:r.querySelector(".arrow-hit-area"),headPath:r.querySelector(".arrow-head")})}),a}function ce(n,a,s,r){n.forEach(i=>{let S=i.fromId==a?s:parseFloat(i.fromBar.dataset.startX),D=i.fromId==a?r:parseFloat(i.fromBar.dataset.endX),w=parseFloat(i.fromBar.dataset.centerY),X=i.toId==a?s:parseFloat(i.toBar.dataset.startX),R=i.toId==a?r:parseFloat(i.toBar.dataset.endX),P=parseFloat(i.toBar.dataset.centerY),L,I,U,ve;i.isScheduling?(L=D+2,I=w,U=X-2,ve=P):(L=(S+D)/2,I=w,U=(X+R)/2,ve=P);let{path:Se,arrowHead:We}=we(L,I,U,ve,i.isScheduling);i.linePath&&i.linePath.setAttribute("d",Se),i.hitPath&&i.hitPath.setAttribute("d",Se),i.headPath&&i.headPath.setAttribute("d",We)})}let De=document.getElementById("dragConfirmOverlay"),Ce=document.getElementById("dragConfirmMessage"),Xe=document.getElementById("dragConfirmOk"),Ze=document.getElementById("dragConfirmCancel"),ee=null;function te(n,a,s){!De||!Ce||(Ce.textContent=n,ee={onConfirm:a,onCancel:s},M(!0),De.style.display="flex",Xe&&Xe.focus())}function ke(){De&&(De.style.display="none"),ee=null}function Be(){V&&fe&&(V.scrollLeft=fe.left,V.scrollTop=fe.top),fe=null}Xe?.addEventListener("click",()=>{ee?.onConfirm&&ee.onConfirm(),fe=null,ke()}),Ze?.addEventListener("click",()=>{ee?.onCancel&&ee.onCancel(),Be(),ke()}),De?.addEventListener("click",n=>{n.target===De&&(ee?.onCancel&&ee.onCancel(),Be(),ke())}),me("keydown",n=>{ee&&(n.key==="Escape"?(n.preventDefault(),ee.onCancel&&ee.onCancel(),Be(),ke()):n.key==="Enter"&&(n.preventDefault(),ee.onConfirm&&ee.onConfirm(),fe=null,ke()))});let p=null,fe=null,Ke=!1;document.querySelectorAll(".drag-handle").forEach(n=>{n.addEventListener("mousedown",a=>{a.preventDefault(),a.stopPropagation(),fe={left:V?.scrollLeft,top:V?.scrollTop};let s=n.closest(".issue-bar"),r=n.classList.contains("drag-left"),i=parseInt(s.dataset.issueId),S=parseFloat(s.dataset.startX),D=parseFloat(s.dataset.endX),w=s.dataset.startDate||null,X=s.dataset.dueDate||null,R=s.querySelector(".bar-outline"),P=s.querySelector(".bar-main"),L=s.querySelector(".drag-left"),I=s.querySelector(".drag-right");s.classList.add("dragging");let U=s.querySelector(".bar-labels"),ve=U?.classList.contains("labels-left"),Se=Me(i),We=s.querySelector(".link-handle");p={issueId:i,isLeft:r,isMove:!1,initialMouseX:a.clientX,startX:S,endX:D,oldStartDate:w,oldDueDate:X,barOutline:R,barMain:P,leftHandle:L,rightHandle:I,bar:s,barLabels:U,labelsOnLeft:ve,connectedArrows:Se,linkHandle:We};let qe=r?S:D,Ye=r?w:X;Ye&&(He((r?"Start: ":"Due: ")+Ie(Ye)),Te(a.clientX,a.clientY))})}),document.querySelectorAll(".bar-outline").forEach(n=>{n.addEventListener("mousedown",a=>{if(a.target.classList.contains("drag-handle")||a.ctrlKey||a.metaKey||a.shiftKey)return;a.preventDefault(),a.stopPropagation(),fe={left:V?.scrollLeft,top:V?.scrollTop};let s=n.closest(".issue-bar");if(!s)return;let r=s.dataset.issueId,i=N.size>1&&N.has(r),D=(i?G.filter(L=>N.has(L.dataset.issueId)):[s]).map(L=>({issueId:L.dataset.issueId,startX:parseFloat(L.dataset.startX),endX:parseFloat(L.dataset.endX),oldStartDate:L.dataset.startDate||null,oldDueDate:L.dataset.dueDate||null,barOutline:L.querySelector(".bar-outline"),barMain:L.querySelector(".bar-main"),leftHandle:L.querySelector(".drag-left"),rightHandle:L.querySelector(".drag-right"),bar:L,barLabels:L.querySelector(".bar-labels"),labelsOnLeft:L.querySelector(".bar-labels")?.classList.contains("labels-left"),connectedArrows:Me(L.dataset.issueId),linkHandle:L.querySelector(".link-handle")}));D.forEach(L=>L.bar.classList.add("dragging"));let w=s.querySelector(".bar-labels"),X=w?.classList.contains("labels-left"),R=Me(r),P=s.querySelector(".link-handle");p={issueId:parseInt(r),isLeft:!1,isMove:!0,isBulkDrag:i,bulkBars:D,initialMouseX:a.clientX,startX:parseFloat(s.dataset.startX),endX:parseFloat(s.dataset.endX),oldStartDate:s.dataset.startDate||null,oldDueDate:s.dataset.dueDate||null,barOutline:n,barMain:s.querySelector(".bar-main"),leftHandle:s.querySelector(".drag-left"),rightHandle:s.querySelector(".drag-right"),bar:s,barLabels:w,labelsOnLeft:X,connectedArrows:R,linkHandle:P},!i&&s.dataset.startDate&&s.dataset.dueDate&&(He(pe(s.dataset.startDate,s.dataset.dueDate)),Te(a.clientX,a.clientY))})});let u=null,v=null,A=null;function O(){u&&(u.fromBar.classList.remove("linking-source"),document.querySelectorAll(".link-target").forEach(n=>n.classList.remove("link-target")),v&&(v.remove(),v=null),u=null,A=null,document.body.classList.remove("cursor-crosshair"))}function de(n,a,s,r){document.querySelector(".relation-picker")?.remove();let i=document.createElement("div");i.className="relation-picker";let S=180,D=200,w=Math.min(n,window.innerWidth-S-10),X=Math.min(a,window.innerHeight-D-10);i.style.left=Math.max(10,w)+"px",i.style.top=Math.max(10,X)+"px";let R=[{value:"blocks",label:"\u{1F6AB} Blocks",cssClass:"rel-line-blocks",tooltip:"Target cannot be closed until this issue is closed"},{value:"precedes",label:"\u27A1\uFE0F Precedes",cssClass:"rel-line-scheduling",tooltip:"This issue must complete before target can start"},{value:"relates",label:"\u{1F517} Relates to",cssClass:"rel-line-informational",tooltip:"Simple link between issues (no constraints)"},{value:"duplicates",label:"\u{1F4CB} Duplicates",cssClass:"rel-line-informational",tooltip:"Closing target will automatically close this issue"},{value:"copied_to",label:"\u{1F4C4} Copied to",cssClass:"rel-line-informational",tooltip:"This issue was copied to create the target issue"}],P=[{value:"finish_to_start",label:"\u23E9 Finish\u2192Start",cssClass:"rel-line-scheduling",tooltip:"Target starts after this issue finishes (FS)"},{value:"start_to_start",label:"\u25B6\uFE0F Start\u2192Start",cssClass:"rel-line-scheduling",tooltip:"Target starts when this issue starts (SS)"},{value:"finish_to_finish",label:"\u23F9\uFE0F Finish\u2192Finish",cssClass:"rel-line-scheduling",tooltip:"Target finishes when this issue finishes (FF)"},{value:"start_to_finish",label:"\u23EA Start\u2192Finish",cssClass:"rel-line-scheduling",tooltip:"Target finishes when this issue starts (SF)"}];(E?[...R,...P]:R).forEach(I=>{let U=document.createElement("button"),ve=document.createElement("span");ve.className="color-swatch "+I.cssClass,U.appendChild(ve),U.appendChild(document.createTextNode(I.label)),U.title=I.tooltip,U.addEventListener("click",()=>{H(),b.postMessage({command:"createRelation",issueId:s,targetIssueId:r,relationType:I.value}),i.remove()}),i.appendChild(U)}),document.body.appendChild(i),ne(i)}let ye=".drag-handle, .link-handle, .bar-outline, .blocks-badge-group, .blocker-badge, .progress-badge-group, .flex-badge-group";document.querySelectorAll(".issue-bar").forEach(n=>{n.addEventListener("click",a=>{a.target.closest(ye)||p||u||Ke||(g()&&l(),f(n.dataset.issueId))}),n.addEventListener("dblclick",a=>{p||u||Ke||(a.preventDefault(),ae(n.dataset.issueId))})});function xe(n,a){if(document.querySelectorAll(".dependency-arrow.selected").forEach(r=>r.classList.remove("selected")),document.querySelectorAll(".arrow-connected").forEach(r=>r.classList.remove("arrow-connected")),n.length===0)return;document.body.classList.add("arrow-selection-mode");let s=new Set;n.forEach(r=>{r.classList.add("selected"),s.add(r.dataset.from),s.add(r.dataset.to)}),s.forEach(r=>{document.querySelectorAll(`.issue-bar[data-issue-id="${r}"], .issue-label[data-issue-id="${r}"]`).forEach(i=>i.classList.add("arrow-connected"))}),Y(`Highlighted ${n.length} dependency arrow(s) for #${a}`)}document.querySelectorAll(".blocks-badge-group").forEach(n=>{n.addEventListener("mousedown",a=>{a.preventDefault(),a.stopPropagation()}),n.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();let s=n.closest(".issue-bar");if(!s)return;let r=s.dataset.issueId,i=Array.from(document.querySelectorAll(`.dependency-arrow[data-from="${r}"]`));xe(i,r)})}),document.querySelectorAll(".blocker-badge").forEach(n=>{n.addEventListener("mousedown",a=>{a.preventDefault(),a.stopPropagation()}),n.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();let s=n.closest(".issue-bar");if(!s)return;let r=s.dataset.issueId,i=Array.from(document.querySelectorAll(`.dependency-arrow[data-to="${r}"]`));xe(i,r)})});let T=Array.from(document.querySelectorAll(".issue-bar")),Re=10;T.forEach((n,a)=>{n.addEventListener("keydown",s=>{if(s.key==="Enter"||s.key===" ")s.preventDefault(),f(n.dataset.issueId);else if(s.key==="ArrowDown"&&a<T.length-1)s.preventDefault(),T[a+1].focus(),Y(`Issue ${T[a+1].getAttribute("aria-label")}`);else if(s.key==="ArrowUp"&&a>0)s.preventDefault(),T[a-1].focus(),Y(`Issue ${T[a-1].getAttribute("aria-label")}`);else if(s.key==="Home")s.preventDefault(),T[0].focus(),Y(`First issue: ${T[0].getAttribute("aria-label")}`);else if(s.key==="End")s.preventDefault(),T[T.length-1].focus(),Y(`Last issue: ${T[T.length-1].getAttribute("aria-label")}`);else if(s.key==="PageDown"){s.preventDefault();let r=Math.min(a+Re,T.length-1);T[r].focus(),Y(`Issue ${T[r].getAttribute("aria-label")}`)}else if(s.key==="PageUp"){s.preventDefault();let r=Math.max(a-Re,0);T[r].focus(),Y(`Issue ${T[r].getAttribute("aria-label")}`)}else if(s.key==="Tab"&&s.shiftKey){let r=n.dataset.issueId,i=document.querySelector(`.issue-label[data-issue-id="${r}"]`);i&&(s.preventDefault(),i.focus(),Y(`Label for issue #${r}`))}})}),document.querySelectorAll(".link-handle").forEach(n=>{n.addEventListener("mousedown",a=>{a.stopPropagation(),a.preventDefault();let s=n.closest(".issue-bar"),r=parseInt(s.dataset.issueId),i=parseFloat(n.dataset.cx),S=parseFloat(n.dataset.cy);s.classList.add("linking-source"),document.body.classList.add("cursor-crosshair");let D=document.querySelector("#ganttTimeline svg");if(!document.getElementById("temp-arrow-head")){let w=document.createElementNS("http://www.w3.org/2000/svg","defs");w.innerHTML=`
            <marker id="temp-arrow-head" markerWidth="10" markerHeight="7"
                    refX="9" refY="3.5" orient="auto" markerUnits="strokeWidth">
              <polygon points="0 0, 10 3.5, 0 7" fill="var(--vscode-focusBorder)"/>
            </marker>`,D.insertBefore(w,D.firstChild)}v=document.createElementNS("http://www.w3.org/2000/svg","path"),v.classList.add("temp-link-arrow"),v.setAttribute("stroke","var(--vscode-focusBorder)"),v.setAttribute("stroke-width","2"),v.setAttribute("fill","none"),v.setAttribute("marker-end","url(#temp-arrow-head)"),D.appendChild(v),u={fromId:r,fromBar:s,startX:i,startY:S}})}),me("keydown",n=>{if(n.key==="Escape"){let a=document.querySelector(".relation-picker");if(a){n.stopImmediatePropagation(),a.remove();return}if(u){n.stopImmediatePropagation(),O();return}g()&&(n.stopImmediatePropagation(),l(),Y("Focus cleared"))}});let Fe=!1,oe=null;me("mousemove",n=>{!p&&!u||(oe=n,!Fe&&(Fe=!0,requestAnimationFrame(()=>{Fe=!1;let a=oe;if(a){if(p){let s=a.clientX-p.initialMouseX;if(p.isMove&&p.isBulkDrag&&p.bulkBars){let r=Q(s)-Q(0);p.bulkBars.forEach(i=>{let S=i.endX-i.startX,D=Math.max(0,Math.min(i.startX+r,ue-S)),w=D+S,X=w-D;if(i.barOutline.setAttribute("x",D),i.barOutline.setAttribute("width",X),i.barMain&&(i.barMain.setAttribute("x",D),i.barMain.setAttribute("width",X)),i.leftHandle.setAttribute("x",D),i.rightHandle.setAttribute("x",w-8),i.newStartX=D,i.newEndX=w,i.barLabels){let R=i.labelsOnLeft?D-i.startX:w-i.endX;i.barLabels.setAttribute("transform","translate("+R+", 0)")}i.connectedArrows&&ce(i.connectedArrows,i.issueId,D,w),i.linkHandle&&i.linkHandle.querySelectorAll("circle").forEach(R=>R.setAttribute("cx",String(w+8)))}),p.snappedDelta=r}else{let r=p.startX,i=p.endX,S=p.endX-p.startX;p.isMove?(r=Q(Math.max(0,Math.min(p.startX+s,ue-S))),i=r+S):p.isLeft?r=Q(Math.max(0,Math.min(p.startX+s,p.endX-$))):i=Q(Math.max(p.startX+$,Math.min(p.endX+s,ue)));let D=i-r;if(p.barOutline.setAttribute("x",r),p.barOutline.setAttribute("width",D),p.barMain&&(p.barMain.setAttribute("x",r),p.barMain.setAttribute("width",D)),p.leftHandle.setAttribute("x",r),p.rightHandle.setAttribute("x",i-8),p.newStartX=r,p.newEndX=i,p.barLabels){let w=p.labelsOnLeft?r-p.startX:i-p.endX;p.barLabels.setAttribute("transform","translate("+w+", 0)")}if(p.connectedArrows&&ce(p.connectedArrows,p.issueId,r,i),p.linkHandle&&p.linkHandle.querySelectorAll("circle").forEach(w=>w.setAttribute("cx",String(i+8))),p.isMove&&!p.isBulkDrag){let w=y(r),X=m(i),P=w!==p.oldStartDate?pe(p.oldStartDate,p.oldDueDate)+" \u2192 "+pe(w,X):pe(w,X);je(P),Te(a.clientX,a.clientY)}else if(!p.isMove){let w=p.isLeft?r:i,X=p.isLeft?y(w):m(w);je((p.isLeft?"Start: ":"Due: ")+Ie(X)),Te(a.clientX,a.clientY)}}}if(u&&v){let r=document.querySelector("#ganttTimeline svg").getBoundingClientRect(),i=a.clientX-r.left,S=a.clientY-r.top,D=`M ${u.startX} ${u.startY} L ${i} ${S}`;v.setAttribute("d",D);let w=document.elementFromPoint(a.clientX,a.clientY)?.closest(".issue-bar");A&&A!==w&&A.classList.remove("link-target"),w&&w!==u.fromBar?(w.classList.add("link-target"),A=w):A=null}}})))});function Pe(n){if(!n)return;let{bar:a,barOutline:s,barMain:r,leftHandle:i,rightHandle:S,barLabels:D,startX:w,endX:X,connectedArrows:R,issueId:P,linkHandle:L}=n,I=X-w;s&&(s.setAttribute("x",String(w)),s.setAttribute("width",String(I))),r&&(r.setAttribute("x",String(w)),r.setAttribute("width",String(I))),i&&i.setAttribute("x",String(w)),S&&S.setAttribute("x",String(X-8)),D&&D.removeAttribute("transform"),R&&R.length>0&&ce(R,P,w,X),L&&L.querySelectorAll("circle").forEach(U=>U.setAttribute("cx",String(X+8))),a&&a.classList.remove("dragging")}me("mouseup",n=>{if(p){let{issueId:a,isLeft:s,isMove:r,isBulkDrag:i,bulkBars:S,newStartX:D,newEndX:w,bar:X,startX:R,endX:P,oldStartDate:L,oldDueDate:I,barOutline:U,barMain:ve,leftHandle:Se,rightHandle:We,barLabels:qe,connectedArrows:Ye}=p,ze={...p};if(i&&S&&r){S.forEach(W=>W.bar.classList.remove("dragging"));let Le=[];if(S.forEach(W=>{if(W.newStartX!==void 0&&W.newStartX!==W.startX){let K=y(W.newStartX),Ee=m(W.newEndX);(K!==W.oldStartDate||Ee!==W.oldDueDate)&&Le.push({issueId:parseInt(W.issueId),oldStartDate:W.oldStartDate,oldDueDate:W.oldDueDate,newStartDate:K,newDueDate:Ee,barData:W})}}),Le.length>0){Oe();let W="Move "+Le.length+" issue(s) to new dates?";te(W,()=>{he.push({type:"bulk",changes:Le.map(K=>({issueId:K.issueId,oldStartDate:K.oldStartDate,oldDueDate:K.oldDueDate,newStartDate:K.newStartDate,newDueDate:K.newDueDate}))}),ge.length=0,J(),H(),Le.forEach(K=>{b.postMessage({command:"updateDates",issueId:K.issueId,startDate:K.newStartDate,dueDate:K.newDueDate})})},()=>{S.forEach(K=>Pe(K))})}else Oe(),S.forEach(W=>Pe(W));p=null,Ke=!0,requestAnimationFrame(()=>Ke=!1);return}if(X.classList.remove("dragging"),Oe(),D!==void 0||w!==void 0){let Le=null,W=null;r?D!==R&&(Le=y(D),W=m(w)):s?Le=D!==R?y(D):null:W=w!==P?m(w):null;let K=Le&&Le!==L?Le:null,Ee=W&&W!==I?W:null;if(K||Ee){let Ne="Issue #"+a+": ";K&&Ee?Ne+=pe(L,I)+" \u2192 "+pe(K,Ee):K?Ne+="Start: "+Ie(L)+" \u2192 "+Ie(K):Ne+="Due: "+Ie(I)+" \u2192 "+Ie(Ee),te(Ne,()=>{he.push({issueId:a,oldStartDate:K?L:null,oldDueDate:Ee?I:null,newStartDate:K,newDueDate:Ee}),ge.length=0,J(),H(),b.postMessage({command:"updateDates",issueId:a,startDate:K,dueDate:Ee})},()=>{Pe(ze)})}else Pe(ze)}else Pe(ze);p=null,Ke=!0,requestAnimationFrame(()=>Ke=!1)}if(u){let a=u.fromId;if(A){let s=parseInt(A.dataset.issueId);a!==s&&de(n.clientX,n.clientY,a,s)}O()}ee||Be()}),Z?.addEventListener("click",()=>{if(Z.hasAttribute("disabled")||he.length===0)return;let n=he.pop();ge.push(n),J(),H(),n.type==="relation"?n.operation==="create"?b.postMessage({command:"undoRelation",operation:"delete",relationId:n.relationId,datesBefore:n.datesBefore}):b.postMessage({command:"undoRelation",operation:"create",issueId:n.issueId,targetIssueId:n.targetIssueId,relationType:n.relationType}):n.type==="bulk"?n.changes.forEach(a=>{b.postMessage({command:"updateDates",issueId:a.issueId,startDate:a.oldStartDate,dueDate:a.oldDueDate})}):b.postMessage({command:"updateDates",issueId:n.issueId,startDate:n.oldStartDate,dueDate:n.oldDueDate})}),le?.addEventListener("click",()=>{if(le.hasAttribute("disabled")||ge.length===0)return;let n=ge.pop();he.push(n),J(),H(),n.type==="relation"?n.operation==="create"?b.postMessage({command:"redoRelation",operation:"create",issueId:n.issueId,targetIssueId:n.targetIssueId,relationType:n.relationType}):b.postMessage({command:"redoRelation",operation:"delete",relationId:n.relationId}):n.type==="bulk"?n.changes.forEach(a=>{b.postMessage({command:"updateDates",issueId:a.issueId,startDate:a.newStartDate,dueDate:a.newDueDate})}):b.postMessage({command:"updateDates",issueId:n.issueId,startDate:n.newStartDate,dueDate:n.newDueDate})})}function ft(k){let{vscode:b,addDocListener:Z,addWinListener:le,announce:me,barHeight:ne,selectedCollapseKey:Y}=k;document.querySelectorAll(".collapse-toggle").forEach(l=>{l.addEventListener("click",g=>{g.stopPropagation();let M=l.closest("[data-collapse-key]")?.dataset.collapseKey;M&&ae(M)})}),document.getElementById("menuExpand")?.addEventListener("click",()=>{let g=document.getElementById("ganttScroll")?.dataset.allExpandableKeys,f=g?JSON.parse(g):[];b.postMessage({command:"expandAll",keys:f})}),document.getElementById("menuCollapse")?.addEventListener("click",()=>{b.postMessage({command:"collapseAll"})});let H=Array.from(document.querySelectorAll(".project-label, .issue-label, .time-group-label")),J=null,he=Y??null;function ge(l){return!l.classList.contains("gantt-row-hidden")&&l.getAttribute("visibility")!=="hidden"}function N(l,g){let f=l+g;for(;f>=0&&f<H.length;){if(ge(H[f]))return{label:H[f],index:f};f+=g}return null}function se(l){let g=document.getElementById("ganttScroll"),f=document.querySelector(".gantt-header-row");if(!g||!l)return;let M=f?.getBoundingClientRect().height||60,C=l.closest(".gantt-row");if(!C)return;let y=C.getBoundingClientRect().top,m=C.getBoundingClientRect().height,F=g.getBoundingClientRect(),_=F.top+M,Ie=F.bottom;y<_?g.scrollBy({top:y-_-4,behavior:"smooth"}):y+m>Ie&&g.scrollBy({top:y+m-Ie+4,behavior:"smooth"})}function G(l,g=!1,f=!1,M=!1){J&&J.classList.remove("active"),J=l,l&&(l.classList.add("active"),M||l.focus(),f&&se(l),g||b.postMessage({command:"setSelectedKey",collapseKey:l.dataset.collapseKey}))}le("focus",()=>{J&&ge(J)&&J.focus()}),Z("keydown",l=>{l.key==="Escape"&&J&&(J.classList.remove("active"),J.blur(),J=null,b.postMessage({command:"setSelectedKey",collapseKey:null}))});let x=new Map,E=new Map,z=new Map;function d(l){let g=l.dataset.originalY;if(z.has(g))return z.get(g);let f=JSON.parse(l.dataset.rowContributions||"{}");return z.set(g,f),f}function ue(){x.clear(),document.querySelectorAll("[data-collapse-key][data-original-y]").forEach(g=>{let f=g.dataset.collapseKey,M=parseFloat(g.dataset.originalY);x.has(f)||x.set(f,{originalY:M,elements:[]}),x.get(f).elements.push(g)})}function $(){E.clear(),document.querySelectorAll("[data-collapse-key][data-parent-key]").forEach(g=>{let f=g.dataset.collapseKey;if(E.has(f))return;let M=[],C=g.dataset.parentKey;for(;C;)M.push(C),C=document.querySelector('[data-collapse-key="'+C+'"]')?.dataset.parentKey||null;E.set(f,M)})}ue(),$();function B(l,g){g?(l.setAttribute("visibility","hidden"),l.classList.add("gantt-row-hidden")):(l.removeAttribute("visibility"),l.classList.remove("gantt-row-hidden"))}function V(l){let g=[];return E.forEach((f,M)=>{f.includes(l)&&g.push(M)}),g}function Q(l){let g=[];return E.forEach((f,M)=>{let C=f.indexOf(l);if(C===-1)return;let y=!0;for(let m=0;m<C;m++){let F=f[m],_=document.querySelector('[data-collapse-key="'+F+'"].project-label, [data-collapse-key="'+F+'"].issue-label, [data-collapse-key="'+F+'"].time-group-label');if(!_||_.dataset.expanded!=="true"){y=!1;break}}y&&g.push(M)}),g}function ae(l,g){let f=document.querySelector('[data-collapse-key="'+l+'"].project-label, [data-collapse-key="'+l+'"].time-group-label, [data-collapse-key="'+l+'"].issue-label');if(!f||f.dataset.hasChildren!=="true")return;let M=f.dataset.expanded==="true",C=g==="expand"?!0:g==="collapse"?!1:!M;if(C===M)return;f.dataset.expanded=C?"true":"false";let y=f.querySelector(".collapse-toggle");y&&y.classList.toggle("expanded",C);let m=V(l),F=C?Q(l):[];if(m.length===0){b.postMessage({command:"collapseStateSync",collapseKey:l,isExpanded:C});return}let _=new Set(m),Ie=new Set(F),pe=x.get(l),He=pe?.originalY??0,je=new Set,Te=0,Oe=0,we=C?F:Q(l),Me=new Set(we);if(document.querySelectorAll(".zebra-stripe").forEach(u=>{let v=d(u);l in v&&Oe===0&&(Oe=parseFloat(u.dataset.originalY||"0"));for(let[A,O]of Object.entries(v))Me.has(A)&&!je.has(A)&&(Te+=parseFloat(O),je.add(A))}),Te===0&&we.length>0){b.postMessage({command:"collapseStateSync",collapseKey:l,isExpanded:C}),b.postMessage({command:"requestRerender"});return}let ce=C?Te:-Te,De=He;if(pe&&pe.elements.length>0){let v=(pe.elements[0].getAttribute("transform")||"").match(/translate\([^,]+,\s*([-\d.]+)/);v&&(De=parseFloat(v[1]))}let Ce=De+ne;C?F.forEach(u=>{let v=x.get(u);v&&(v.elements.forEach(A=>{let de=(A.getAttribute("transform")||"").match(/translate\(([-\d.]+)/),ye=de?de[1]:"0";A.setAttribute("transform","translate("+ye+", "+Ce+")"),B(A,!1)}),Ce+=ne)}):m.forEach(u=>{let v=x.get(u);v&&v.elements.forEach(A=>{B(A,!0)})}),x.forEach(({originalY:u,elements:v},A)=>{u>He&&!_.has(A)&&v.forEach(O=>{let de=O.getAttribute("transform")||"",ye=de.match(/translate\(([-\d.]+)/),xe=ye?ye[1]:"0",T=de.match(/translate\([^,]+,\s*([-\d.]+)/),Fe=(T?parseFloat(T[1]):u)+ce;O.setAttribute("transform","translate("+xe+", "+Fe+")")})});let Xe=document.querySelector(".gantt-labels svg");if(Xe){let v=parseFloat(Xe.getAttribute("height")||"0")+ce;Xe.setAttribute("height",String(v))}[".gantt-col-status svg",".gantt-col-id svg",".gantt-col-start svg",".gantt-col-due svg",".gantt-col-assignee svg"].forEach(u=>{let v=document.querySelector(u);if(!v)return;let O=parseFloat(v.getAttribute("height")||"0")+ce;v.setAttribute("height",String(O))});let ee=document.querySelector(".gantt-timeline svg");if(ee){let v=parseFloat(ee.getAttribute("height")||"0")+ce;ee.setAttribute("height",v)}let te=new Set;document.querySelectorAll('.project-label[data-has-children="true"], .time-group-label[data-has-children="true"], .issue-label[data-has-children="true"]').forEach(u=>{u.dataset.expanded==="false"&&te.add(u.dataset.collapseKey)});let ke=new Map,Be=document.querySelectorAll(".zebra-stripe");Be.forEach(u=>{let v=parseFloat(u.dataset.originalY||"0");if(ke.has(v))return;let A=d(u),O=Object.keys(A),de=O.length>0&&O.every(T=>_.has(T)),ye=O.some(T=>_.has(T)),xe=v>Oe;if(de)ke.set(v,{action:"toggle-visibility",hide:!C});else if(ye)if(C){let T=0;for(let[Re,Fe]of Object.entries(A))(!_.has(Re)||Ie.has(Re))&&(T+=parseFloat(Fe));ke.set(v,{action:"expand",newHeight:T})}else{let T=0;for(let[Re,Fe]of Object.entries(A))_.has(Re)||(T+=parseFloat(Fe));ke.set(v,{action:"shrink",newHeight:T})}else if(xe){let T=parseFloat(u.getAttribute("y")||String(v));ke.set(v,{action:"shift",newY:T+ce})}}),Be.forEach(u=>{let v=parseFloat(u.dataset.originalY||"0"),A=ke.get(v);if(A)switch(A.action){case"toggle-visibility":B(u,A.hide);break;case"shrink":u.setAttribute("height",String(A.newHeight));break;case"expand":u.setAttribute("height",String(A.newHeight));break;case"shift":u.setAttribute("y",String(A.newY));break}});let p=Array.from(document.querySelectorAll(".zebra-stripe")).filter(u=>u.getAttribute("visibility")!=="hidden"),fe=new Map;p.forEach(u=>{let v=parseFloat(u.getAttribute("y")||"0");fe.has(v)||fe.set(v,[]),fe.get(v).push(u)}),Array.from(fe.keys()).sort((u,v)=>u-v).forEach((u,v)=>{let A=v%2===0?"0.03":"0.06";fe.get(u).forEach(O=>O.setAttribute("opacity",A))}),document.querySelectorAll(".indent-guide-line").forEach(u=>{let v=u.dataset.forParent,A=E.get(v)||[],O=te.has(v)||A.some(de=>te.has(de));if(B(u,O),!O){let de=x.get(v);if(de&&de.originalY>He){let ye=parseFloat(u.getAttribute("y1")||"0"),xe=parseFloat(u.getAttribute("y2")||"0");u.setAttribute("y1",ye+ce),u.setAttribute("y2",xe+ce)}}}),document.querySelectorAll(".dependency-arrow").forEach(u=>{let v=u.dataset.from,A=u.dataset.to,O=document.querySelector('.issue-bar[data-issue-id="'+v+'"]'),de=document.querySelector('.issue-bar[data-issue-id="'+A+'"]'),ye=O?.classList.contains("gantt-row-hidden"),xe=de?.classList.contains("gantt-row-hidden");B(u,ye||xe)}),b.postMessage({command:"collapseStateSync",collapseKey:l,isExpanded:C})}if(he){let l=H.find(g=>g.dataset.collapseKey===he);l&&G(l,!0)}H.forEach((l,g)=>{l.addEventListener("click",f=>{if(f.target.closest?.(".collapse-toggle")||f.target.closest?.(".chevron-hit-area"))return;let M=l.dataset.issueId,C=l.classList.contains("project-label"),y=l.classList.contains("time-group-label"),m=l.dataset.collapseKey;if((C||y)&&m){G(l),l.dataset.hasChildren==="true"&&ae(m);return}let F=f.target.classList?.contains("issue-text")||f.target.closest(".issue-text");M&&F?(G(l,!1,!1,!0),b.postMessage({command:"openIssue",issueId:parseInt(M,10)})):l.dataset.hasChildren==="true"&&m?(G(l),ae(m)):G(l)}),l.addEventListener("keydown",f=>{let M=l.dataset.collapseKey,C=l.dataset.issueId?parseInt(l.dataset.issueId,10):NaN;switch(f.key){case"Enter":case" ":f.preventDefault(),isNaN(C)||b.postMessage({command:"openIssue",issueId:C});break;case"ArrowUp":{f.preventDefault();let y=N(g,-1);y&&G(y.label,!1,!0);break}case"ArrowDown":{f.preventDefault();let y=N(g,1);y&&G(y.label,!1,!0);break}case"ArrowLeft":if(f.preventDefault(),l.dataset.hasChildren==="true"&&l.dataset.expanded==="true")ae(M,"collapse");else if(l.dataset.parentKey){let y=H.find(m=>m.dataset.collapseKey===l.dataset.parentKey);y&&G(y,!1,!0)}break;case"ArrowRight":if(f.preventDefault(),l.dataset.hasChildren==="true"&&l.dataset.expanded==="false")ae(M,"expand");else if(l.dataset.hasChildren==="true"&&l.dataset.expanded==="true"){let y=H.find(m=>m.dataset.parentKey===M&&ge(m));y&&G(y,!1,!0)}break;case"Home":{f.preventDefault();let y=N(-1,1);y&&G(y.label,!1,!0);break}case"End":{f.preventDefault();let y=N(H.length,-1);y&&G(y.label,!1,!0);break}case"PageDown":{f.preventDefault();let y=g,m=0;for(;m<10&&y<H.length-1;){let F=N(y,1);if(!F)break;y=F.index,m++}m>0&&G(H[y],!1,!0);break}case"PageUp":{f.preventDefault();let y=g,m=0;for(;m<10&&y>0;){let F=N(y,-1);if(!F)break;y=F.index,m++}m>0&&G(H[y],!1,!0);break}case"Tab":if(!f.shiftKey&&!isNaN(C)){let y=document.querySelector(`.issue-bar[data-issue-id="${C}"]`);y&&(f.preventDefault(),y.focus(),me(`Timeline bar for issue #${C}`))}break}})})}function mt(k){let{vscode:b,addDocListener:Z,menuUndo:le,menuRedo:me,undoStack:ne,redoStack:Y,saveState:H,updateUndoRedoButtons:J,announce:he,scrollToAndHighlight:ge,scrollToToday:N}=k;Z("keydown",d=>{let $=navigator.platform.toUpperCase().indexOf("MAC")>=0?d.metaKey:d.ctrlKey;if(!(d.target.tagName==="INPUT"||d.target.tagName==="SELECT"||d.target.tagName==="TEXTAREA"))if($&&d.key==="z"&&!d.shiftKey)d.preventDefault(),le?.click();else if($&&d.key==="z"&&d.shiftKey)d.preventDefault(),me?.click();else if($&&d.key==="y")d.preventDefault(),me?.click();else if(d.key>="1"&&d.key<="5"){let B=document.getElementById("zoomSelect"),V=["day","week","month","quarter","year"];B.value=V[parseInt(d.key)-1],B.dispatchEvent(new Event("change"))}else if(d.key.toLowerCase()==="h")document.getElementById("menuHeatmap")?.click();else if(d.key.toLowerCase()==="y")document.getElementById("menuCapacity")?.click();else if(d.key.toLowerCase()==="i")document.getElementById("menuIntensity")?.click();else if(d.key.toLowerCase()==="d")document.getElementById("menuDeps")?.click();else if(d.key.toLowerCase()==="v"){let B=document.getElementById("viewFocusSelect");B.value=B.value==="project"?"person":"project",B.dispatchEvent(new Event("change"))}else if(d.key.toLowerCase()==="r")document.getElementById("refreshBtn")?.click();else if(d.key.toLowerCase()==="t")N();else if(d.key.toLowerCase()==="e")document.getElementById("menuExpand")?.click();else if(d.key.toLowerCase()==="c"&&!$)document.getElementById("menuCollapse")?.click();else if(d.key.toLowerCase()==="f"&&!$)d.preventDefault(),document.getElementById("menuFilterHealth")?.click();else if(d.key.toLowerCase()==="b"){d.preventDefault();let B=Array.from(document.querySelectorAll(".issue-bar[data-issue-id]")).filter(g=>g.querySelector(".blocker-badge"));if(B.length===0){he("No blocked issues");return}let V=document.activeElement?.closest(".issue-bar"),ae=((V?B.indexOf(V):-1)+1)%B.length,l=B[ae];ge(l.dataset.issueId),l.focus(),he("Blocked issue "+(ae+1)+" of "+B.length)}else if(d.key==="ArrowLeft"||d.key==="ArrowRight"){let B=document.activeElement?.closest(".issue-bar:not(.parent-bar)");if(!B)return;d.preventDefault();let V=parseInt(B.dataset.issueId),Q=B.dataset.startDate,ae=B.dataset.dueDate;if(!Q&&!ae)return;let l=d.key==="ArrowRight"?1:-1,g=(C,y)=>{let m=new Date(C+"T00:00:00");return m.setDate(m.getDate()+y),m.toISOString().slice(0,10)},f=null,M=null;d.shiftKey&&ae?M=g(ae,l):d.altKey&&Q?f=g(Q,l):(Q&&(f=g(Q,l)),ae&&(M=g(ae,l))),(f||M)&&(H(),ne.push({issueId:V,oldStartDate:f?Q:null,oldDueDate:M?ae:null,newStartDate:f,newDueDate:M}),Y.length=0,J(),b.postMessage({command:"updateDates",issueId:V,startDate:f,dueDate:M}))}else d.key==="/"&&!$?(d.preventDefault(),G()):(d.key==="?"||d.shiftKey&&d.key==="/")&&(d.preventDefault(),z())});let se=null;function G(){se&&se.remove(),se=document.createElement("div"),se.className="quick-search",se.innerHTML=`
      <input type="text" placeholder="Search issues..." autofocus />
    `,document.body.appendChild(se);let d=se.querySelector("input");d.focus();let ue=Array.from(document.querySelectorAll(".issue-label"));d.addEventListener("input",()=>{let $=d.value.toLowerCase();ue.forEach(B=>{let V=B.getAttribute("aria-label")?.toLowerCase()||"",Q=$&&V.includes($);B.classList.toggle("search-match",Q)})}),d.addEventListener("keydown",$=>{if($.key==="Escape")x();else if($.key==="Enter"){let B=document.querySelector(".issue-label.search-match");B&&(x(),B.focus(),ge(B.dataset.issueId))}}),d.addEventListener("blur",()=>setTimeout(x,150))}function x(){se&&(se.remove(),se=null,document.querySelectorAll(".search-match").forEach(d=>d.classList.remove("search-match")))}let E=null;function z(){if(E){E.remove(),E=null;return}E=document.createElement("div"),E.className="keyboard-help",E.innerHTML=`
      <div class="keyboard-help-content">
        <h3>Keyboard Shortcuts</h3>
        <div class="shortcut-grid">
          <div class="shortcut-section">
            <h4>Navigation</h4>
            <div><kbd>\u2191</kbd><kbd>\u2193</kbd> Move between issues</div>
            <div><kbd>Home</kbd><kbd>End</kbd> First/last issue</div>
            <div><kbd>PgUp</kbd><kbd>PgDn</kbd> Jump 10 rows</div>
            <div><kbd>Tab</kbd> Label \u2192 Bar</div>
            <div><kbd>Shift+Tab</kbd> Bar \u2192 Label</div>
          </div>
          <div class="shortcut-section">
            <h4>Date Editing</h4>
            <div><kbd>\u2190</kbd><kbd>\u2192</kbd> Move bar \xB11 day</div>
            <div><kbd>Shift+\u2190/\u2192</kbd> Resize end</div>
            <div><kbd>Alt+\u2190/\u2192</kbd> Resize start</div>
            <div><kbd>Ctrl+Z</kbd> Undo</div>
            <div><kbd>Ctrl+Y</kbd> Redo</div>
          </div>
          <div class="shortcut-section">
            <h4>View</h4>
            <div><kbd>1-5</kbd> Zoom levels</div>
            <div><kbd>H</kbd> Heatmap</div>
            <div><kbd>D</kbd> Dependencies</div>
            <div><kbd>C</kbd> Critical path</div>
            <div><kbd>T</kbd> Today</div>
          </div>
          <div class="shortcut-section">
            <h4>Health & Other</h4>
            <div><kbd>F</kbd> Cycle health filter</div>
            <div><kbd>B</kbd> Next blocked issue</div>
            <div><kbd>/</kbd> Quick search</div>
            <div><kbd>S</kbd> Cycle sort</div>
            <div><kbd>R</kbd> Refresh</div>
            <div><kbd>Esc</kbd> Clear/cancel</div>
          </div>
        </div>
        <p class="keyboard-help-close">Press <kbd>?</kbd> or <kbd>Esc</kbd> to close</p>
      </div>
    `,document.body.appendChild(E),E.addEventListener("click",d=>{d.target===E&&z()})}Z("keydown",d=>{d.key==="Escape"&&E&&(d.stopImmediatePropagation(),z())})}var j=acquireVsCodeApi(),Qe=!1;function Ve(k){Qe&&typeof performance<"u"&&performance.mark(k)}function nt(k,b,Z){if(Qe&&typeof performance<"u")try{performance.measure(k,b,Z);let le=performance.getEntriesByName(k,"measure");le.length>0&&console.log(`[Gantt Perf] ${k}: ${le[le.length-1].duration.toFixed(2)}ms`),performance.clearMarks(b),performance.clearMarks(Z),performance.clearMeasures(k)}catch{}}function yt(){if(Qe){let k=document.getElementById("ganttRoot"),b=k?k.querySelectorAll("*").length:0,Z=k?k.querySelectorAll("svg *").length:0;console.log(`[Gantt Perf] DOM nodes: ${b}, SVG elements: ${Z}`)}}function bt(k){if(!k)return;let b=document.documentElement;b.style.setProperty("--gantt-header-height",`${k.headerHeight}px`),b.style.setProperty("--gantt-label-width",`${k.labelWidth}px`),b.style.setProperty("--gantt-id-column-width",`${k.idColumnWidth}px`),b.style.setProperty("--gantt-start-date-column-width",`${k.startDateColumnWidth}px`),b.style.setProperty("--gantt-status-column-width",`${k.statusColumnWidth}px`),b.style.setProperty("--gantt-due-date-column-width",`${k.dueDateColumnWidth}px`),b.style.setProperty("--gantt-assignee-column-width",`${k.assigneeColumnWidth}px`),b.style.setProperty("--gantt-sticky-left-width",`${k.stickyLeftWidth}px`)}function gt(k){if(!k)return;k.state&&(Qe=k.state.perfDebug??!1),Ve("render-start");let b=document.getElementById("ganttRoot");b&&(bt(k.state),Ve("innerHTML-start"),b.innerHTML=k.html||"",Ve("innerHTML-end"),nt("innerHTML","innerHTML-start","innerHTML-end"),vt(k.state),Ve("render-end"),nt("render","render-start","render-end"),yt())}window.addEventListener("message",k=>{let b=k.data;if(b){if(b.command==="render"){gt(b.payload);return}window.__ganttHandleExtensionMessage&&window.__ganttHandleExtensionMessage(b)}});var ht=window.__GANTT_INITIAL_PAYLOAD__;ht&&gt(ht);j.postMessage({command:"webviewReady"});function vt(k){if(Ve("initializeGantt-start"),!k)return;let{timelineWidth:b,minDateMs:Z,maxDateMs:le,totalDays:me,extendedRelationTypes:ne,redmineBaseUrl:Y,minimapBarsData:H,minimapHeight:J,minimapBarHeight:he,minimapTodayX:ge,extScrollLeft:N,extScrollTop:se,labelWidth:G,leftExtrasWidth:x,healthFilter:E,sortBy:z,sortOrder:d,selectedCollapseKey:ue,barHeight:$,todayX:B,todayInRange:V}=k,Q=b/me;window._ganttCleanup&&window._ganttCleanup();let ae=[],l=[];function g(e,t,o){document.addEventListener(e,t,o),ae.push({type:e,handler:t,options:o})}function f(e,t,o){window.addEventListener(e,t,o),l.push({type:e,handler:t,options:o})}window._ganttCleanup=()=>{ae.forEach(e=>document.removeEventListener(e.type,e.handler,e.options)),l.forEach(e=>window.removeEventListener(e.type,e.handler,e.options)),window.__ganttHandleExtensionMessage=null};function M(e){setTimeout(()=>{document.addEventListener("click",function t(o){e.contains(o.target)||(e.remove(),document.removeEventListener("click",t))})},0)}function C(e){return Math.round(e/Q)*Q}function y(e){let t=document.getElementById("liveRegion");t&&(t.textContent=e)}let m=document.getElementById("ganttScroll"),F=document.getElementById("ganttLeftHeader"),_=document.getElementById("ganttLabels"),Ie=document.getElementById("ganttTimeline"),pe=document.getElementById("menuUndo"),He=document.getElementById("menuRedo"),je=document.getElementById("minimapSvg"),Te=document.getElementById("minimapViewport"),{updateMinimapPosition:Oe,updateMinimapViewport:Ae}=dt({timelineWidth:b,minimapBarsData:H,minimapHeight:J,minimapBarHeight:he,minimapTodayX:ge,ganttScroll:m,minimapSvg:je,minimapViewport:Te,addDocListener:g}),we=j.getState()||{undoStack:[],redoStack:[],labelWidth:G,scrollLeft:null,scrollTop:null,centerDateMs:null},Me=we.undoStack||[],ce=we.redoStack||[],De=we.scrollLeft??(N>0?N:null),Ce=we.scrollTop??(se>0?se:null),Xe=we.centerDateMs;function Ze(){if(!m)return null;let t=document.querySelector(".gantt-body .gantt-sticky-left")?.offsetWidth??0,o=m.clientWidth-t,h=(m.scrollLeft+o/2)/b;return Z+h*(le-Z)}function ee(e){if(!m)return;let o=(e-Z)/(le-Z)*b,h=document.querySelector(".gantt-body .gantt-sticky-left")?.offsetWidth??0,q=m.clientWidth-h;m.scrollLeft=Math.max(0,o-q/2)}function te(){j.setState({undoStack:Me,redoStack:ce,labelWidth:_?.offsetWidth||G,scrollLeft:null,scrollTop:m?.scrollTop??null,centerDateMs:Ze()})}let ke=te;function Be(){pe&&pe.toggleAttribute("disabled",Me.length===0),He&&He.toggleAttribute("disabled",ce.length===0),te()}if(we.labelWidth&&F&&_){F.style.width=we.labelWidth+"px",_.style.width=we.labelWidth+"px";let e=document.querySelector(".capacity-ribbon-label");e&&(e.style.width=we.labelWidth+x+"px")}let p=!0,fe=!1,Ke=e=>{fe=e},u=null;m&&m.addEventListener("scroll",()=>{cancelAnimationFrame(u),u=requestAnimationFrame(()=>{Ae(),p||te()})},{passive:!0}),requestAnimationFrame(()=>Be()),window.__ganttHandleExtensionMessage=e=>{if(e.command==="setHeatmapState"){let t=document.querySelector(".heatmap-layer"),o=document.querySelector(".weekend-layer"),c=document.getElementById("menuHeatmap");e.enabled?(t&&t.classList.remove("hidden"),o&&o.classList.add("hidden"),c&&c.classList.add("active")):(t&&t.classList.add("hidden"),o&&o.classList.remove("hidden"),c&&c.classList.remove("active"))}else if(e.command==="setDependenciesState"){let t=document.querySelector(".dependency-layer"),o=document.getElementById("menuDeps");e.enabled?(t&&t.classList.remove("hidden"),o&&o.classList.add("active")):(t&&t.classList.add("hidden"),o&&o.classList.remove("active"))}else if(e.command==="setCapacityRibbonState"){let t=document.querySelector(".capacity-ribbon"),o=document.getElementById("menuCapacity");e.enabled?(t&&t.classList.remove("hidden"),o&&o.classList.add("active")):(t&&t.classList.add("hidden"),o&&o.classList.remove("active"))}else if(e.command==="setIntensityState"){let t=document.querySelector(".gantt-container"),o=document.getElementById("menuIntensity");e.enabled?(t?.classList.add("intensity-enabled"),o&&o.classList.add("active")):(t?.classList.remove("intensity-enabled"),o&&o.classList.remove("active"))}else if(e.command==="pushUndoAction")Me.push(e.action),ce.length=0,Be(),te();else if(e.command==="updateRelationId"){let t=e.stack==="undo"?Me:ce;if(t.length>0){let o=t[t.length-1];o.type==="relation"&&(o.relationId=e.newRelationId,te())}}else if(e.command==="scrollToIssue"){let t=e.issueId,o=document.querySelector('.issue-label[data-issue-id="'+t+'"]'),c=document.querySelector('.issue-bar[data-issue-id="'+t+'"]'),h=document.getElementById("ganttScroll"),re=document.querySelector(".gantt-header-row")?.getBoundingClientRect().height||60;if(!h)return;let be=h.scrollTop,ie=h.scrollLeft;if(o){let $e=o.closest(".gantt-row");if($e){let _e=$e.offsetTop,Ue=$e.getBoundingClientRect().height,Ge=h.clientHeight-re;be=Math.max(0,_e-re-(Ge-Ue)/2)}o.focus(),o.classList.add("highlighted"),setTimeout(()=>o.classList.remove("highlighted"),2e3)}if(c){let $e=parseFloat(c.getAttribute("data-start-x")||"0"),Ue=parseFloat(c.getAttribute("data-end-x")||"0")-$e,Ge=h.clientWidth,pt=document.querySelector(".gantt-sticky-left")?.getBoundingClientRect().width||0,ct=Ge-pt;Ue<=ct-100?ie=$e-(ct-Ue)/2:ie=$e-50,ie=Math.max(0,ie),c.classList.add("highlighted"),setTimeout(()=>c.classList.remove("highlighted"),2e3)}h.scrollTo({left:ie,top:be,behavior:"smooth"})}},document.getElementById("lookbackSelect")?.addEventListener("change",e=>{j.postMessage({command:"setLookback",years:e.target.value})}),document.getElementById("zoomSelect")?.addEventListener("change",e=>{ke(),j.postMessage({command:"setZoom",zoomLevel:e.target.value})}),document.getElementById("viewFocusSelect")?.addEventListener("change",e=>{j.postMessage({command:"setViewFocus",focus:e.target.value})}),document.getElementById("projectSelector")?.addEventListener("change",e=>{let t=e.target.value,o=t?parseInt(t,10):null;j.postMessage({command:"setSelectedProject",projectId:o})}),document.getElementById("focusSelector")?.addEventListener("change",e=>{let t=e.target.value;j.postMessage({command:"setSelectedAssignee",assignee:t||null})}),document.getElementById("filterAssignee")?.addEventListener("change",e=>{let t=e.target.value;j.postMessage({command:"setFilter",filter:{assignee:t}})}),document.getElementById("filterStatus")?.addEventListener("change",e=>{let t=e.target.value;j.postMessage({command:"setFilter",filter:{status:t}})}),document.getElementById("menuFilterHealth")?.addEventListener("click",()=>{let e=["all","critical","warning","healthy"],t=E,c=(e.indexOf(t)+1)%e.length;j.postMessage({command:"setHealthFilter",health:e[c]})}),document.querySelectorAll(".gantt-col-header.sortable").forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.sort;t===z?d==="asc"?j.postMessage({command:"setSort",sortOrder:"desc"}):j.postMessage({command:"setSort",sortBy:null}):j.postMessage({command:"setSort",sortBy:t,sortOrder:"asc"})})}),document.getElementById("menuHeatmap")?.addEventListener("click",()=>{document.getElementById("menuHeatmap")?.hasAttribute("disabled")||(te(),j.postMessage({command:"toggleWorkloadHeatmap"}))}),document.getElementById("menuCapacity")?.addEventListener("click",()=>{document.getElementById("menuCapacity")?.hasAttribute("disabled")||(te(),j.postMessage({command:"toggleCapacityRibbon"}))}),document.getElementById("menuIntensity")?.addEventListener("click",()=>{document.getElementById("menuIntensity")?.hasAttribute("disabled")||(te(),j.postMessage({command:"toggleIntensity"}))}),document.getElementById("overloadBadge")?.addEventListener("click",e=>{e.stopPropagation();let t=e.currentTarget,o=parseInt(t.dataset.firstOverloadMs||"0",10);o>0&&(ee(o),te())}),document.querySelectorAll(".capacity-day-bar-group").forEach(e=>{e.addEventListener("click",t=>{let o=parseInt(t.currentTarget.dataset.dateMs||"0",10);o>0&&(ee(o),te())})}),document.getElementById("menuDeps")?.addEventListener("click",()=>{te(),j.postMessage({command:"toggleDependencies"})});let O=document.querySelector(".gantt-container");function de(){let e=new Map,t=new Map;return document.querySelectorAll(".dependency-arrow").forEach(o=>{if(!(o.classList.contains("rel-blocks")||o.classList.contains("rel-precedes")))return;let h=o.dataset.from,q=o.dataset.to;e.has(h)||e.set(h,[]),e.get(h).push(q),t.has(q)||t.set(q,[]),t.get(q).push(h)}),{graph:e,reverseGraph:t}}let ye=null;function xe(e,t,o){let c=new Set([e]),h=[e];for(;h.length>0;){let re=h.shift(),be=t.get(re)||[];for(let ie of be)c.has(ie)||(c.add(ie),h.push(ie))}let q=[e];for(;q.length>0;){let re=q.shift(),be=o.get(re)||[];for(let ie of be)c.has(ie)||(c.add(ie),q.push(ie))}return c}function T(e){if(Re(),!e)return;ye=e;let{graph:t,reverseGraph:o}=de(),c=xe(e,t,o);O.classList.add("focus-mode"),document.querySelectorAll(".issue-bar").forEach(h=>{c.has(h.dataset.issueId)&&h.classList.add("focus-highlighted")}),document.querySelectorAll(".issue-label").forEach(h=>{c.has(h.dataset.issueId)&&h.classList.add("focus-highlighted")}),document.querySelectorAll(".dependency-arrow").forEach(h=>{c.has(h.dataset.from)&&c.has(h.dataset.to)&&h.classList.add("focus-highlighted")}),y(`Focus: ${c.size} issue${c.size!==1?"s":""} in dependency chain`)}function Re(){ye=null,O.classList.remove("focus-mode"),document.querySelectorAll(".focus-highlighted").forEach(e=>e.classList.remove("focus-highlighted"))}let Fe=()=>ye,oe=new Set,Pe=null,n=document.getElementById("selectionCount"),a=Array.from(document.querySelectorAll(".issue-bar")),s=new Map;a.forEach(e=>{let t=e.dataset.issueId;t&&(s.has(t)||s.set(t,[]),s.get(t).push(e))});function r(e){e.forEach(t=>{let o=s.get(t);o&&o.forEach(c=>c.classList.toggle("selected",oe.has(t)))}),oe.size>0?(n.textContent=`${oe.size} selected`,n.classList.remove("hidden"),O.classList.add("multi-select-mode")):(n.classList.add("hidden"),O.classList.remove("multi-select-mode"))}function i(){a.forEach(e=>{e.classList.toggle("selected",oe.has(e.dataset.issueId))}),oe.size>0?(n.textContent=`${oe.size} selected`,n.classList.remove("hidden"),O.classList.add("multi-select-mode")):(n.classList.add("hidden"),O.classList.remove("multi-select-mode"))}function S(){let e=[...oe];oe.clear(),Pe=null,r(e)}function D(e){oe.has(e)?oe.delete(e):oe.add(e),Pe=e,r([e])}function w(e,t){let o=a.findIndex(be=>be.dataset.issueId===e),c=a.findIndex(be=>be.dataset.issueId===t);if(o===-1||c===-1)return;let h=Math.min(o,c),q=Math.max(o,c),re=[];for(let be=h;be<=q;be++){let ie=a[be].dataset.issueId;oe.has(ie)||(oe.add(ie),re.push(ie))}r(re)}function X(){a.forEach(e=>oe.add(e.dataset.issueId)),i(),y(`Selected all ${oe.size} issues`)}a.forEach(e=>{e.addEventListener("mousedown",t=>{if(!t.ctrlKey&&!t.metaKey&&!t.shiftKey||t.target.classList.contains("drag-handle")||t.target.classList.contains("link-handle"))return;t.preventDefault(),t.stopPropagation();let o=e.dataset.issueId;t.shiftKey&&Pe?w(Pe,o):D(o)})}),g("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="a"&&(e.preventDefault(),X()),e.key==="Escape"&&oe.size>0&&(e.stopImmediatePropagation(),S(),y("Selection cleared"))}),document.getElementById("refreshBtn")?.addEventListener("click",()=>{document.getElementById("loadingOverlay")?.classList.add("visible"),j.postMessage({command:"refresh"})});function R(e,t,o,c,h){document.querySelector(".relation-picker")?.remove();let q=document.createElement("div");q.className="relation-picker";let re=150,be=100,ie=Math.min(e,window.innerWidth-re-10),$e=Math.min(t,window.innerHeight-be-10);q.style.left=Math.max(10,ie)+"px",q.style.top=Math.max(10,$e)+"px";let _e=document.createElement("div");_e.style.padding="6px 12px",_e.style.fontSize="11px",_e.style.opacity="0.7",_e.textContent=`#${c} \u2192 #${h}`,q.appendChild(_e);let Ue=document.createElement("button");Ue.textContent="\u{1F5D1}\uFE0F Delete relation",Ue.addEventListener("click",()=>{te(),j.postMessage({command:"deleteRelation",relationId:o}),q.remove()}),q.appendChild(Ue);let Ge=document.createElement("button");Ge.textContent="Cancel",Ge.addEventListener("click",()=>q.remove()),q.appendChild(Ge),document.body.appendChild(q),M(q)}let P=new Map,L=new Map,I=new Map,U=new Map,ve=new Map,Se=!1;function We(){document.querySelectorAll(".issue-bar").forEach(e=>{let t=e.dataset.issueId;t&&(P.has(t)||P.set(t,[]),P.get(t).push(e))}),document.querySelectorAll(".issue-label").forEach(e=>{let t=e.dataset.issueId;t&&(L.has(t)||L.set(t,[]),L.get(t).push(e))}),document.querySelectorAll(".dependency-arrow").forEach(e=>{let t=e.dataset.from,o=e.dataset.to;t&&(I.has(t)||I.set(t,[]),I.get(t).push(e)),o&&(I.has(o)||I.set(o,[]),I.get(o).push(e))}),document.querySelectorAll(".project-label").forEach(e=>{let t=e.dataset.collapseKey;t&&(U.has(t)||U.set(t,[]),U.get(t).push(e))}),document.querySelectorAll(".aggregate-bars").forEach(e=>{let t=e.dataset.collapseKey;t&&(ve.has(t)||ve.set(t,[]),ve.get(t).push(e))}),Se=!0}typeof requestIdleCallback<"u"?requestIdleCallback(()=>We(),{timeout:100}):setTimeout(We,0);let qe=[];function Ye(){document.body.classList.remove("hover-focus","dependency-hover"),qe.forEach(e=>e.classList.remove("hover-highlighted","hover-source")),qe=[]}function ze(e){document.body.classList.add("hover-focus");let t=Se?P.get(e)||[]:document.querySelectorAll('.issue-bar[data-issue-id="'+e+'"]'),o=Se?L.get(e)||[]:document.querySelectorAll('.issue-label[data-issue-id="'+e+'"]'),c=Se?I.get(e)||[]:document.querySelectorAll('.dependency-arrow[data-from="'+e+'"], .dependency-arrow[data-to="'+e+'"]');t.forEach(h=>{h.classList.add("hover-highlighted"),qe.push(h)}),o.forEach(h=>{h.classList.add("hover-highlighted"),qe.push(h)}),c.forEach(h=>{h.classList.add("hover-highlighted"),qe.push(h)})}function Le(e){document.body.classList.add("hover-focus");let t=Se?U.get(e)||[]:document.querySelectorAll('.project-label[data-collapse-key="'+e+'"]'),o=Se?ve.get(e)||[]:document.querySelectorAll('.aggregate-bars[data-collapse-key="'+e+'"]');t.forEach(c=>{c.classList.add("hover-highlighted"),qe.push(c)}),o.forEach(c=>{c.classList.add("hover-highlighted"),qe.push(c)})}let W=document.querySelector(".gantt-timeline svg"),K=document.querySelector(".gantt-labels svg");if(W&&(W.addEventListener("mouseenter",e=>{let t=e.target.closest(".issue-bar"),o=e.target.closest(".aggregate-bars"),c=e.target.closest(".dependency-arrow");if(t){let h=t.dataset.issueId;h&&ze(h)}else if(o){let h=o.dataset.collapseKey;h&&Le(h)}else if(c){let h=c.dataset.from,q=c.dataset.to;document.body.classList.add("dependency-hover"),c.classList.add("hover-source"),qe.push(c),h&&ze(h),q&&ze(q)}},!0),W.addEventListener("mouseleave",e=>{let t=e.target.closest(".issue-bar"),o=e.target.closest(".aggregate-bars"),c=e.target.closest(".dependency-arrow");(t||o||c)&&Ye()},!0)),K&&(K.addEventListener("mouseenter",e=>{let t=e.target.closest(".issue-label"),o=e.target.closest(".project-label");if(t){let c=t.dataset.issueId;c&&ze(c)}else if(o){let c=o.dataset.collapseKey;c&&Le(c)}},!0),K.addEventListener("mouseleave",e=>{let t=e.target.closest(".issue-label"),o=e.target.closest(".project-label");(t||o)&&Ye()},!0)),W){let t=function(){document.querySelectorAll(".dependency-arrow.selected").forEach(o=>o.classList.remove("selected")),document.body.classList.remove("arrow-selection-mode"),document.querySelectorAll(".arrow-connected").forEach(o=>o.classList.remove("arrow-connected")),e=null};var wt=t;W.addEventListener("contextmenu",o=>{let c=o.target.closest(".dependency-arrow");if(!c)return;o.preventDefault();let h=parseInt(c.dataset.relationId),q=c.dataset.from,re=c.dataset.to;R(o.clientX,o.clientY,h,q,re)});let e=null;W.addEventListener("click",o=>{let c=o.target.closest(".dependency-arrow");if(e&&(e.classList.remove("selected"),document.body.classList.remove("arrow-selection-mode"),document.querySelectorAll(".arrow-connected").forEach(re=>re.classList.remove("arrow-connected")),e=null),!c)return;o.stopPropagation(),e=c,c.classList.add("selected"),document.body.classList.add("arrow-selection-mode");let h=c.dataset.from,q=c.dataset.to;document.querySelectorAll(`.issue-bar[data-issue-id="${h}"], .issue-bar[data-issue-id="${q}"]`).forEach(re=>re.classList.add("arrow-connected")),document.querySelectorAll(`.issue-label[data-issue-id="${h}"], .issue-label[data-issue-id="${q}"]`).forEach(re=>re.classList.add("arrow-connected")),y(`Selected relation from #${h} to #${q}`)}),window._ganttArrowClickHandler&&document.removeEventListener("click",window._ganttArrowClickHandler),window._ganttArrowClickHandler=o=>{(e||document.querySelector(".dependency-arrow.selected"))&&!o.target.closest(".dependency-arrow")&&!o.target.closest(".blocks-badge-group")&&!o.target.closest(".blocker-badge")&&t()},document.addEventListener("click",window._ganttArrowClickHandler),window._ganttArrowKeyHandler&&document.removeEventListener("keydown",window._ganttArrowKeyHandler),window._ganttArrowKeyHandler=o=>{let c=e||document.querySelector(".dependency-arrow.selected");o.key==="Escape"&&c&&(o.stopImmediatePropagation(),t())},document.addEventListener("keydown",window._ganttArrowKeyHandler)}ut({vscode:j,menuUndo:pe,menuRedo:He,addDocListener:g,closeOnOutsideClick:M,announce:y,saveState:te,updateUndoRedoButtons:Be,undoStack:Me,redoStack:ce,selectedIssues:oe,clearSelection:S,allIssueBars:a,redmineBaseUrl:Y,extendedRelationTypes:ne,minDateMs:Z,maxDateMs:le,timelineWidth:b,dayWidth:Q,barHeight:$,ganttScroll:m,snapToDay:C,focusOnDependencyChain:T,clearFocus:Re,getFocusedIssueId:Fe,scrollToAndHighlight:Ne,setAllowScrollChange:Ke}),ft({vscode:j,addDocListener:g,addWinListener:f,announce:y,barHeight:$,selectedCollapseKey:ue});function Ee(){if(!V){j.postMessage({command:"todayOutOfRange"});return}if(m){let t=document.querySelector(".gantt-body .gantt-sticky-left")?.offsetWidth??0,o=m.clientWidth-t;m.scrollLeft=Math.max(0,B-o/2)}}function Ne(e){if(!e)return;fe=!0;let t=document.querySelector('.issue-label[data-issue-id="'+e+'"]'),o=document.querySelector('.issue-bar[data-issue-id="'+e+'"]');if(t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("highlighted"),setTimeout(()=>t.classList.remove("highlighted"),1500)),o&&m){let c=o.getBoundingClientRect(),h=m.getBoundingClientRect(),q=m.scrollLeft+c.left-h.left-100;m.scrollTo({left:Math.max(0,q),behavior:"smooth"}),o.classList.add("highlighted"),setTimeout(()=>o.classList.remove("highlighted"),1500)}}mt({vscode:j,addDocListener:g,menuUndo:pe,menuRedo:He,undoStack:Me,redoStack:ce,saveState:te,updateUndoRedoButtons:Be,announce:y,scrollToAndHighlight:Ne,scrollToToday:Ee}),requestAnimationFrame(()=>{if(Xe!==null&&m){let e=Math.max(Z,Math.min(le,Xe));ee(e),Ce!==null&&(m.scrollTop=Ce),Xe=null,Ce=null}else De!==null&&m?(m.scrollLeft=De,Ce!==null&&(m.scrollTop=Ce),De=null,Ce=null):Ee();Ae(),p=!1}),document.getElementById("todayBtn")?.addEventListener("click",Ee);let at=document.getElementById("resizeHandle"),ot=document.getElementById("resizeHandleHeader"),Je=!1,rt=0,it=0,et=null;function lt(e,t){Je=!0,et=t,rt=e.clientX,it=_.offsetWidth,t.classList.add("dragging"),document.body.classList.add("cursor-col-resize","user-select-none"),e.preventDefault()}at?.addEventListener("mousedown",e=>lt(e,at)),ot?.addEventListener("mousedown",e=>lt(e,ot));let tt=!1,st=null;g("mousemove",e=>{Je&&(st=e,!tt&&(tt=!0,requestAnimationFrame(()=>{if(tt=!1,!st)return;let t=st.clientX-rt,o=Math.min(600,Math.max(120,it+t));if(F&&(F.style.width=o+"px"),_){_.style.width=o+"px";let h=_.querySelector("svg");h&&h.setAttribute("width",String(o))}let c=document.querySelector(".capacity-ribbon-label");c&&(c.style.width=o+x+"px"),Oe()})))}),g("mouseup",()=>{Je&&(Je=!1,et?.classList.remove("dragging"),et=null,document.body.classList.remove("cursor-col-resize","user-select-none"),te())}),requestAnimationFrame(()=>{document.getElementById("loadingOverlay")?.classList.remove("visible")}),Ve("initializeGantt-end"),nt("initializeGantt","initializeGantt-start","initializeGantt-end")}})();
